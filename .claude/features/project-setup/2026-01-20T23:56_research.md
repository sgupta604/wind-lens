# Research: project-setup

## Metadata
- **Feature:** project-setup
- **Created:** 2026-01-20T23:56
- **Status:** research-complete

## Requirements from Spec

From `WIND_LENS_MVP_SPEC.md` Section 2 (Technical Stack) and `ROADMAP.md`:

### What to Build
1. Create Flutter project: `flutter create wind_lens`
2. Configure `pubspec.yaml` with dependencies
3. Set up iOS permissions (Info.plist)
4. Set up Android permissions (AndroidManifest.xml)
5. Verify project builds on simulator

### Core Stack
| Component | Choice | Reason |
|-----------|--------|--------|
| Framework | Flutter 3.x | Cross-platform, good shader support |
| Language | Dart | Required for Flutter |
| Min iOS | 14.0 | ARKit compatibility |
| Min Android | API 24 | ARCore compatibility |

### Required Dependencies (pubspec.yaml)
```yaml
dependencies:
  flutter:
    sdk: flutter
  camera: ^0.10.5+9          # Camera feed access
  sensors_plus: ^4.0.2       # Compass/magnetometer
  vector_math: ^2.1.4        # Vector calculations
  http: ^1.2.0               # API calls for real wind data

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.1
```

**Note:** CLAUDE.md lists slightly different versions (camera: ^0.11.3, sensors_plus: ^7.0.0, http: ^1.6.0). Will use CLAUDE.md versions as they appear more recent.

### iOS Permissions (Info.plist)
```xml
<key>NSCameraUsageDescription</key>
<string>Wind Lens needs camera access to show AR wind overlay</string>

<key>NSLocationWhenInUseUsageDescription</key>
<string>Wind Lens uses location for accurate wind data</string>

<key>NSMotionUsageDescription</key>
<string>Wind Lens needs motion sensors for compass heading</string>

<key>UIRequiredDeviceCapabilities</key>
<array>
  <string>accelerometer</string>
  <string>gyroscope</string>
</array>
```

### Android Permissions (AndroidManifest.xml)
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature android:name="android.hardware.camera" android:required="true" />
<uses-feature android:name="android.hardware.sensor.compass" android:required="true" />
```

### Acceptance Criteria
- [x] `flutter run` works on simulator
- [x] All dependencies in pubspec.yaml
- [x] Platform permissions configured

## Existing Code Analysis

**Current State:** No Flutter project exists yet.
- `/workspace` contains only documentation files
- No `pubspec.yaml` found
- No `lib/` directory
- No iOS/Android platform folders

This is a greenfield setup - starting from scratch.

## Technical Constraints

From CLAUDE.md:
- Must use real device for camera/sensor testing (simulator won't work)
- iOS rebuild command for pod issues: `cd ios && rm -rf Pods Podfile.lock && pod install --repo-update && cd .. && flutter clean && flutter build ios`
- Project should be created as `wind_lens`

## Open Questions

All questions resolved:
- [x] Which dependency versions to use? → Use CLAUDE.md versions (more recent)
- [x] Flutter create command → `flutter create wind_lens`
- [x] Minimum platform versions → iOS 14.0, Android API 24

## Recommended Approach

1. **Create Flutter project** in `/workspace`:
   ```bash
   flutter create wind_lens
   ```

2. **Update pubspec.yaml** with dependencies from CLAUDE.md:
   - camera: ^0.11.3
   - sensors_plus: ^7.0.0
   - vector_math: ^2.2.0
   - http: ^1.6.0

3. **Configure iOS permissions** in `ios/Runner/Info.plist`

4. **Configure Android permissions** in `android/app/src/main/AndroidManifest.xml`

5. **Update minimum platform versions**:
   - iOS: Set deployment target to 14.0
   - Android: Set minSdkVersion to 24

6. **Run `flutter pub get`** to install dependencies

7. **Verify build** with `flutter build ios --simulator` or `flutter build apk`

## Risks and Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|
| Flutter version incompatibility | Build failures | Use stable Flutter channel |
| Pod install issues on iOS | Build failures | Use documented rebuild command |
| Dependency version conflicts | Build failures | Test `flutter pub get` early |

## Dependencies

- Flutter SDK must be installed (verified in devcontainer)
- No other features depend on this (this is Feature 0)

## Next Step

Run `/plan project-setup` after this research is approved.
